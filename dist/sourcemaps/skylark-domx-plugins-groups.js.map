{"version":3,"sources":["skylark-domx-plugins-groups.js"],"names":["define","plugins","groups","langx","$","elmx","Group","Plugin","inherit","klassName","pluginName","options","classes","selectors","item","template","selector","selectable","multiSelect","base","selected","active","data","_construct","elm","this","overrided","self","velm","_velm","_elm","itemSelector","on","veItem","hasClass","value","getItemValue","setActiveItem","toggleSelectOneItem","clearSelectedItems","selectOneItem","resetItems","items","addItems","_$items","findItem","valueOrIdx","isNumber","eq","isString","filter","getItems","$item","undefined","index","getItemsCount","size","getItemIndex","isSelectedItem","addClass","unselectOneItem","removeClass","selectedClass","getSelectedItemValues","map","el","getSelectedItems","setSelectedItems","force","isArray","i","length","getActiveItem","activeClass","$activeItem","current","next","getSelectedItem","selectedItems","addItem","itemData","itemHtml","renderItemHtml","baseClass","_$itemsContainer","append","_renderItemHtml","itemTpl","isFunction","register","Collapse","Linear","noder","datax","finder","geom","eventer","styler","dnd","manager","off","attr","removeAttr","pagePosition","height","Draggable","draggingClass","forEach","eventName","mousedown","e","handle","dragHandle","closest","target","source","dragSource","prepare","mouseup","dragstart","start","dragend","stop","dragging","end","Droppable","hoverClass","acceptable","dragover","stopPropagation","e2","create","overElm","transfer","draggingTransfer","trigger","preventDefault","dataTransfer","dropEffect","dragenter","dragleave","drop","Array","prototype","some","enable","disable","destory","placeholders","Sortable","connectWith","placeholder","placeholderClass","container","$container","$items","children","createElement","test","tagName","class","preparing","started","ghost","text","ended","show","detach","parent","overing","is","forcePlaceholderSize","outerHeight","hide","not","dropped","after","add","Tiler","alignment","itemRendered","noItemsHTML","renderItem","main"],"mappings":"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","file":"../skylark-domx-plugins-groups.js","sourcesContent":["define('skylark-domx-plugins-groups/groups',[\r\n    \"skylark-domx-plugins-base/plugins\"\r\n], function(plugins) {\r\n    'use strict';\r\n\r\n\treturn plugins.groups = {};\r\n});\r\n\n define('skylark-domx-plugins-groups/group',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-velm\",\r\n  \"skylark-domx-plugins-base\",\r\n  \"./groups\"\r\n],function(langx,$,elmx,plugins,groups){\r\n  'use strict'\r\n\r\n    /*\r\n     * The base plugin class for grouping items.\r\n     */\r\n    var Group = plugins.Plugin.inherit({\r\n        klassName : \"Group\",\r\n\r\n        pluginName : \"lark.groups.group\",\r\n\r\n        options : {\r\n        \tclasses : {\r\n        \t},\r\n\r\n        \tselectors : {\r\n            //container : \"ul\", // \r\n        \t},\r\n\r\n          item : {\r\n            template : \"<span><i class=\\\"glyphicon\\\"></i><a href=\\\"javascript: void(0);\\\"></a> </span>\",\r\n            selector : \"li\",      // \".list-group-item\"\r\n\r\n            selectable: false,\r\n            multiSelect: false,\r\n\r\n            classes : {\r\n              base : \"item\",\r\n              selected : \"selected\",\r\n              active : \"active\"\r\n            }\r\n          },\r\n\r\n          data : {},\r\n          //active : 0,\r\n\r\n          //A collection or function that is used to generate the content of the group \r\n          /*\r\n           * example1\r\n           *itemsSource : [{  \r\n           *  type: 'image',href : \"https://xxx.com/1.jpg\",title : \"1\"\r\n           *},{\r\n           *  type: 'image',href : \"https://xxx.com/1.jpg\",title : \"1\"\r\n           * }],\r\n           */\r\n          /*\r\n           * example2\r\n           *itemsSource :  function(){},\r\n           */\r\n        },\r\n\r\n        selected : null,\r\n \r\n        _construct : function(elm,options) {\r\n            this.overrided(elm,options);\r\n            var self = this,\r\n                velm = this._velm = elmx(this._elm),\r\n                itemSelector = this.options.item.selector;\r\n\r\n            velm.on('click', itemSelector, function () {\r\n                var veItem = elmx(this);\r\n                if (!veItem.hasClass('disabled')) {\r\n                    let value = self.getItemValue(this);\r\n                    self.setActiveItem(value);\r\n\r\n                  if (self.options.item.selectable) {\r\n\r\n                      if (self.options.item.multiSelect) {\r\n                        self.toggleSelectOneItem(value);\r\n                      } else {\r\n                        self.clearSelectedItems();\r\n                        self.selectOneItem(value);\r\n                      }\r\n                  }\r\n\r\n                }\r\n\r\n\r\n                //veItem.blur();\r\n                return false;\r\n            });\r\n\r\n            this.resetItems();\r\n\r\n            if (this.options.data.items) {\r\n                this.addItems(this.options.data.items);\r\n            }\r\n\r\n            ///if (this.options.item.multiSelect) {\r\n            ///  this.selected = [];\r\n            ///} else {\r\n            ///  this.selected = null;\r\n            ///}\r\n            ///this.selected = this.options.selected;\r\n        },\r\n\r\n        resetItems : function() {\r\n            this._$items = this._velm.$(this.options.item.selector);\r\n        },\r\n\r\n        findItem : function (valueOrIdx) {\r\n          var $item;\r\n          if (langx.isNumber(valueOrIdx)) {\r\n            $item = this._$items.eq(valueOrIdx);\r\n          } else if (langx.isString(valueOrIdx)) {\r\n            $item = this._$items.filter('[data-value=\"' + valueOrIdx + '\"]');\r\n          } else {\r\n            $item = $(valueOrIdx);\r\n          }\r\n          return $item[0];\r\n        },\r\n\r\n        getItems : function() {\r\n          return this._$items;\r\n        },\r\n\r\n        getItemValue : function(item) {\r\n          let $item = $(item),\r\n              value = $item.data(\"value\");\r\n          if (value === undefined) {\r\n            value = this._$items.index($item[0]);\r\n          }\r\n          return value;\r\n        },\r\n\r\n        getItemsCount : function() {\r\n            return this._$items.size();\r\n        },\r\n\r\n        getItemIndex : function(item) {\r\n            return this._$items.index(item);\r\n        },\r\n\r\n        \r\n        isSelectedItem : function(valueOrIdx) {\r\n          return $(this.findItem(valueOrIdx)).hasClass(this.options.item.classes.selected);\r\n        },\r\n                 \r\n        selectOneItem : function (valueOrIdx) {\r\n          $(this.findItem(valueOrIdx)).addClass(this.options.item.classes.selected);\r\n        },\r\n\r\n        unselectOneItem : function (valueOrIdx) {\r\n          $(this.findItem(valueOrIdx)).removeClass(this.options.item.classes.selected);\r\n        },\r\n\r\n        /*\r\n         * clears the selected items.\r\n         */\r\n        clearSelectedItems : function() {\r\n          let selectedClass = this.options.item.classes.selected;\r\n          this._$items.filter(`.${selectedClass}`).removeClass(selectedClass);\r\n        },\r\n\r\n        getSelectedItemValues : function() {\r\n          let selectedClass = this.options.item.classes.selected;\r\n          return  this._$items.filter(`.${selectedClass}`).map( (el) => {\r\n            return this.getItemValue(el);\r\n          });\r\n        },\r\n\r\n        getSelectedItems : function() {\r\n          let selectedClass = this.options.item.classes.selected;\r\n          return  this._$items.filter(`.${selectedClass}`);\r\n        },\r\n\r\n        setSelectedItems : function(items, force) {\r\n            if (!langx.isArray(items)) {\r\n                items = [items];\r\n            }\r\n\r\n            this.clearSelectedItems();\r\n            for (var i = 0; i < items.length; i++) {\r\n              this.selectOneItem(items[i]);\r\n            }\r\n        },\r\n        \r\n        getActiveItem : function() {\r\n          let activeClass = this.options.item.classes.active,\r\n              $activeItem = this._$items.filter(`.${activeClass}`);\r\n          return $activeItem[0] || null;\r\n        },\r\n\r\n        setActiveItem : function(valueOrIdx) {\r\n          let current = this.getActiveItem(),\r\n              next = this.findItem(valueOrIdx);\r\n          if (next != current) {\r\n            let activeClass = this.options.item.classes.active;\r\n            $(current).removeClass(activeClass);\r\n            $(next).addClass(activeClass);\r\n          }\r\n        },\r\n\r\n\r\n        getSelectedItem : function() {\r\n          let selectedItems = this.getSelectedItems();\r\n          return selectedItems[0] || null;\r\n        },\r\n\r\n        toggleSelectOneItem : function(valueOrIdx) {\r\n          if (this.isSelectedItem(valueOrIdx)) {\r\n            this.unselectOneItem(valueOrIdx);\r\n          } else {\r\n            this.selectOneItem(valueOrIdx);\r\n          }\r\n        },\r\n\r\n\r\n        addItems : function(items) {\r\n            let index = this.getItemsCount();\r\n            for (var i=0; i<items.length;i++) {\r\n              this.addItem(index++,items[i]);\r\n            }\r\n            this.resetItems();\r\n        },\r\n\r\n        addItem : function(index,itemData) {\r\n          let itemHtml = this.renderItemHtml(itemData),\r\n              baseClass = this.options.item.classes.base;\r\n\r\n\r\n          let $item = $(itemHtml);\r\n          if (baseClass) {\r\n            $item.addClass(baseClass);\r\n          }\r\n\r\n          if (this._$itemsContainer) {\r\n            this._$itemsContainer.append($item);\r\n          } else {\r\n            this.$().append($item);\r\n          }\r\n        },\r\n\r\n        renderItemHtml : function(itemData) {\r\n          if (!this._renderItemHtml) {\r\n            let itemTpl = this.options.item.template;\r\n            if (langx.isString(itemTpl)) {\r\n              this._renderItemHtml = langx.template(itemTpl);\r\n            } else if (langx.isFunction(itemTpl)) {\r\n              this._renderItemHtml = itemTpl;\r\n            }\r\n          }\r\n\r\n          return this._renderItemHtml(itemData);\r\n        }\r\n\r\n  });\r\n\r\n\r\n  plugins.register(Group);\r\n\r\n  return groups.Group = Group;\r\n\r\n});\r\n\r\n\r\n\r\n\n define('skylark-domx-plugins-groups/linear',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-velm\",\r\n  \"skylark-domx-plugins-base\",\r\n  \"skylark-domx-plugins-toggles/collapse\",\r\n  \"./groups\",\r\n  \"./group\"\r\n],function(langx,$,elmx,plugins,Collapse,groups,Group){\r\n  'use strict'\r\n\r\n  var Linear = Group.inherit({\r\n    klassName : \"Linear\",\r\n\r\n    pluginName : \"lark.groups.linear\",\r\n\r\n    options: {\r\n        item : {\r\n          selectable: true\r\n        }\r\n    },\r\n\r\n    _construct: function (elm, options) {\r\n      this.overrided(elm, options);\r\n\r\n    }\r\n\r\n  });\r\n\r\n  plugins.register(Linear);\r\n\r\n  return groups.Linear = Linear;\r\n\r\n});\r\n\r\n\r\n\r\n\ndefine('skylark-domx-plugins-dnd/draggable',[\r\n    \"skylark-langx/langx\",\r\n    \"skylark-domx-noder\",\r\n    \"skylark-domx-data\",\r\n    \"skylark-domx-finder\",\r\n    \"skylark-domx-geom\",\r\n    \"skylark-domx-eventer\",\r\n    \"skylark-domx-styler\",\r\n    \"skylark-domx-plugins-base\",\r\n    \"./dnd\",\r\n    \"./manager\"\r\n], function(langx, noder, datax, finder, geom, eventer, styler, plugins, dnd,manager) {\r\n    var on = eventer.on,\r\n        off = eventer.off,\r\n        attr = datax.attr,\r\n        removeAttr = datax.removeAttr,\r\n        offset = geom.pagePosition,\r\n        addClass = styler.addClass,\r\n        height = geom.height;\r\n\r\n\r\n\r\n    var Draggable = plugins.Plugin.inherit({\r\n        klassName: \"Draggable\",\r\n        \r\n        pluginName : \"lark.dnd.draggable\",\r\n\r\n        options : {\r\n            draggingClass : \"dragging\"\r\n        },\r\n\r\n        _construct: function(elm, options) {\r\n            this.overrided(elm,options);\r\n\r\n            var self = this,\r\n                options = this.options;\r\n\r\n            self.draggingClass = options.draggingClass;\r\n\r\n            [\"preparing\", \"started\", \"ended\", \"moving\"].forEach(function(eventName) {\r\n                if (langx.isFunction(options[eventName])) {\r\n                    self.on(eventName, options[eventName]);\r\n                }\r\n            });\r\n\r\n\r\n            eventer.on(elm, {\r\n                \"mousedown\": function(e) {\r\n                    var options = self.options;\r\n                    if (options.handle) {\r\n                        self.dragHandle = finder.closest(e.target, options.handle);\r\n                        if (!self.dragHandle) {\r\n                            return;\r\n                        }\r\n                    }\r\n                    if (options.source) {\r\n                        self.dragSource = finder.closest(e.target, options.source);\r\n                    } else {\r\n                        self.dragSource = self._elm;\r\n                    }\r\n                    manager.prepare(self);\r\n                    if (self.dragSource) {\r\n                        datax.attr(self.dragSource, \"draggable\", 'true');\r\n                    }\r\n                },\r\n\r\n                \"mouseup\": function(e) {\r\n                    if (self.dragSource) {\r\n                        //datax.attr(self.dragSource, \"draggable\", 'false');\r\n                        self.dragSource = null;\r\n                        self.dragHandle = null;\r\n                    }\r\n                },\r\n\r\n                \"dragstart\": function(e) {\r\n                    datax.attr(self.dragSource, \"draggable\", 'false');\r\n                    manager.start(self, e);\r\n                },\r\n\r\n                \"dragend\": function(e) {\r\n                    eventer.stop(e);\r\n\r\n                    if (!manager.dragging) {\r\n                        return;\r\n                    }\r\n\r\n                    manager.end(false);\r\n                }\r\n            });\r\n\r\n        }\r\n\r\n    });\r\n\r\n    plugins.register(Draggable,\"draggable\");\r\n\r\n    return dnd.Draggable = Draggable;\r\n});\ndefine('skylark-domx-plugins-dnd/droppable',[\r\n    \"skylark-langx/langx\",\r\n    \"skylark-domx-noder\",\r\n    \"skylark-domx-data\",\r\n    \"skylark-domx-finder\",\r\n    \"skylark-domx-geom\",\r\n    \"skylark-domx-eventer\",\r\n    \"skylark-domx-styler\",\r\n    \"skylark-domx-plugins-base\",\r\n    \"./dnd\",\r\n    \"./manager\"\r\n], function(langx, noder, datax, finder, geom, eventer, styler, plugins, dnd,manager) {\r\n    var on = eventer.on,\r\n        off = eventer.off,\r\n        attr = datax.attr,\r\n        removeAttr = datax.removeAttr,\r\n        offset = geom.pagePosition,\r\n        addClass = styler.addClass,\r\n        height = geom.height;\r\n\r\n\r\n    var Droppable = plugins.Plugin.inherit({\r\n        klassName: \"Droppable\",\r\n\r\n        pluginName : \"lark.dnd.droppable\",\r\n\r\n        options : {\r\n            draggingClass : \"dragging\"\r\n        },\r\n\r\n        _construct: function(elm, options) {\r\n            this.overrided(elm,options);\r\n\r\n            var self = this,\r\n                options = self.options,\r\n                draggingClass = options.draggingClass,\r\n                hoverClass,\r\n                activeClass,\r\n                acceptable = true;\r\n\r\n            [\"started\", \"entered\", \"leaved\", \"dropped\", \"overing\"].forEach(function(eventName) {\r\n                if (langx.isFunction(options[eventName])) {\r\n                    self.on(eventName, options[eventName]);\r\n                }\r\n            });\r\n\r\n            eventer.on(elm, {\r\n                \"dragover\": function(e) {\r\n                    e.stopPropagation()\r\n\r\n                    if (!acceptable) {\r\n                        return\r\n                    }\r\n\r\n                    var e2 = eventer.create(\"overing\", {\r\n                        overElm: e.target,\r\n                        transfer: manager.draggingTransfer,\r\n                        acceptable: true\r\n                    });\r\n                    self.trigger(e2);\r\n\r\n                    if (e2.acceptable) {\r\n                        e.preventDefault() // allow drop\r\n\r\n                        e.dataTransfer.dropEffect = \"copyMove\";\r\n                    }\r\n\r\n                },\r\n\r\n                \"dragenter\": function(e) {\r\n                    var options = self.options,\r\n                        elm = self._elm;\r\n\r\n                    var e2 = eventer.create(\"entered\", {\r\n                        transfer: manager.draggingTransfer\r\n                    });\r\n\r\n                    self.trigger(e2);\r\n\r\n                    e.stopPropagation()\r\n\r\n                    if (hoverClass && acceptable) {\r\n                        styler.addClass(elm, hoverClass)\r\n                    }\r\n                },\r\n\r\n                \"dragleave\": function(e) {\r\n                    var options = self.options,\r\n                        elm = self._elm;\r\n                    if (!acceptable) return false\r\n\r\n                    var e2 = eventer.create(\"leaved\", {\r\n                        transfer: manager.draggingTransfer\r\n                    });\r\n\r\n                    self.trigger(e2);\r\n\r\n                    e.stopPropagation()\r\n\r\n                    if (hoverClass && acceptable) {\r\n                        styler.removeClass(elm, hoverClass);\r\n                    }\r\n                },\r\n\r\n                \"drop\": function(e) {\r\n                    var options = self.options,\r\n                        elm = self._elm;\r\n\r\n                    eventer.stop(e); // stops the browser from redirecting.\r\n\r\n                    if (!manager.dragging) return\r\n\r\n                    // manager.dragging.elm.removeClass('dragging');\r\n\r\n                    if (hoverClass && acceptable) {\r\n                        styler.addClass(elm, hoverClass)\r\n                    }\r\n\r\n                    var e2 = eventer.create(\"dropped\", {\r\n                        transfer: manager.draggingTransfer\r\n                    });\r\n\r\n                    self.trigger(e2);\r\n\r\n                    manager.end(true)\r\n                }\r\n            });\r\n\r\n            manager.on(\"dndStarted\", function(e) {\r\n                var e2 = eventer.create(\"started\", {\r\n                    transfer: manager.draggingTransfer,\r\n                    acceptable: false\r\n                });\r\n\r\n                self.trigger(e2);\r\n\r\n                acceptable = e2.acceptable;\r\n                hoverClass = e2.hoverClass;\r\n                activeClass = e2.activeClass;\r\n\r\n                if (activeClass && acceptable) {\r\n                    styler.addClass(elm, activeClass);\r\n                }\r\n\r\n            }).on(\"dndEnded\", function(e) {\r\n                var e2 = eventer.create(\"ended\", {\r\n                    transfer: manager.draggingTransfer,\r\n                    acceptable: false\r\n                });\r\n\r\n                self.trigger(e2);\r\n\r\n                if (hoverClass && acceptable) {\r\n                    styler.removeClass(elm, hoverClass);\r\n                }\r\n                if (activeClass && acceptable) {\r\n                    styler.removeClass(elm, activeClass);\r\n                }\r\n\r\n                acceptable = false;\r\n                activeClass = null;\r\n                hoverClass = null;\r\n            });\r\n\r\n        }\r\n    });\r\n\r\n    plugins.register(Droppable,\"droppable\");\r\n\r\n    return dnd.Droppable = Droppable;\r\n});\ndefine('skylark-domx-plugins-groups/sortable',[\r\n    \"./groups\",\r\n    \"skylark-langx/langx\",\r\n    \"skylark-domx-noder\",\r\n    \"skylark-domx-data\",\r\n    \"skylark-domx-geom\",\r\n    \"skylark-domx-eventer\",\r\n    \"skylark-domx-styler\",\r\n    \"skylark-domx-query\",\r\n    \"skylark-domx-plugins-base\",\r\n    \"skylark-domx-plugins-dnd/draggable\",\r\n    \"skylark-domx-plugins-dnd/droppable\"\r\n],function(groups, langx,noder,datax,geom,eventer,styler,$,plugins,Draggable,Droppable){\r\n   'use strict'\r\n\r\n    var on = eventer.on,\r\n        off = eventer.off,\r\n        attr = datax.attr,\r\n        removeAttr = datax.removeAttr,\r\n        offset = geom.pagePosition,\r\n        addClass = styler.addClass,\r\n        height = geom.height,\r\n        some = Array.prototype.some,\r\n        map = Array.prototype.map;\r\n\r\n    var Sorter = plugins.Plugin.inherit({\r\n        \"klassName\" : \"Sorter\",\r\n\r\n        enable : function() {\r\n\r\n        },\r\n        \r\n        disable : function() {\r\n\r\n        },\r\n\r\n        destory : function() {\r\n\r\n        }\r\n    });\r\n\r\n\r\n    var dragging, placeholders = $();\r\n\r\n\r\n    var Sortable = plugins.Plugin.inherit({\r\n        klassName: \"Sortable\",\r\n\r\n        pluginName : \"lark.groups.sortable\",\r\n        \r\n        options : {\r\n            connectWith: false,\r\n            placeholder: null,\r\n            placeholderClass: 'sortable-placeholder',\r\n            draggingClass: 'sortable-dragging',\r\n            items : null\r\n        },\r\n\r\n        /*\r\n         * @param {HTMLElement} container  the element to use as a sortable container\r\n         * @param {Object} options  options object\r\n         * @param {String} [options.items = \"\"] \r\n         * @param {Object} [options.connectWith =] the selector to create connected groups\r\n         * @param {Object} [options\r\n         * @param {Object} [options\r\n         */\r\n        _construct : function (container,options) {\r\n            this.overrided(container,options);\r\n\r\n            options = this.options;\r\n\r\n            var isHandle, index, \r\n                $container = $(container), \r\n                $items = $container.children(options.items);\r\n            var placeholder = $(options.placeholder || noder.createElement(/^(ul|ol)$/i.test(container.tagName) ? 'li' : 'div',{\r\n                \"class\" : options.placeholderClass\r\n            }));\r\n\r\n            Draggable(container,{\r\n                source : options.items,\r\n                handle : options.handle,\r\n                draggingClass : options.draggingClass,\r\n                preparing : function(e) {\r\n                    //e.dragSource = e.handleElm;\r\n                },\r\n                started :function(e) {\r\n                    e.ghost = e.dragSource;\r\n                    e.transfer = {\r\n                        \"text\": \"dummy\"\r\n                    };\r\n                    index = (dragging = $(e.dragSource)).index();\r\n                },\r\n                ended : function(e) {\r\n                    if (!dragging) {\r\n                        return;\r\n                    }\r\n                    dragging.show();\r\n                    placeholders.detach();\r\n                    if (index != dragging.index()) {\r\n                        dragging.parent().trigger('sortupdate', {item: dragging});\r\n                    }\r\n                    dragging = null;                \r\n                }\r\n            });\r\n\r\n            \r\n            Droppable(container,{\r\n                started: function(e) {\r\n                    e.acceptable = true;\r\n                    e.activeClass = \"active\";\r\n                    e.hoverClass = \"over\";\r\n                },\r\n                overing : function(e) {\r\n                    if ($items.is(e.overElm)) {\r\n                        if (options.forcePlaceholderSize) {\r\n                            placeholder.height(dragging.outerHeight());\r\n                        }\r\n                        dragging.hide();\r\n                        $(e.overElm)[placeholder.index() < $(e.overElm).index() ? 'after' : 'before'](placeholder);\r\n                        placeholders.not(placeholder).detach();\r\n                    } else if (!placeholders.is(e.overElm) && !$(e.overElm).children(options.items).length) {\r\n                        placeholders.detach();\r\n                        $(e.overElm).append(placeholder);\r\n                    }                \r\n                },\r\n                dropped : function(e) {\r\n                    placeholders.filter(':visible').after(dragging);\r\n                    dragging.show();\r\n                    placeholders.detach();\r\n\r\n                    dragging = null;                \r\n                  }\r\n            });\r\n\r\n            $container.data('items', options.items)\r\n            placeholders = placeholders.add(placeholder);\r\n            if (options.connectWith) {\r\n                $(options.connectWith).add(this).data('connectWith', options.connectWith);\r\n            }\r\n            \r\n        }\r\n    });\r\n\r\n    plugins.register(Sortable,\"sortable\");\r\n\r\n    return groups.Sortable = Sortable;\r\n});\r\n\n define('skylark-domx-plugins-groups/tiler',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-domx-velm\",\r\n  \"skylark-domx-plugins-base\",\r\n  \"./groups\",\r\n  \"./group\"\r\n],function(langx,$,elmx,plugins,groups,Group){\r\n  'use strict'\r\n\r\n  var Tiler = Group.inherit({\r\n    klassName : \"Tiler\",\r\n\r\n    pluginName : \"lark.groups.tiler\",\r\n\r\n    options: {\r\n        alignment: 'left',\r\n        itemRendered: null,\r\n        noItemsHTML: 'no items found',\r\n        item : {\r\n            selector : \"div.thumbnail\",\r\n            template: '<div class=\"thumbnail\"><img height=\"75\" src=\"<%= href %>\" width=\"65\"><span><%= title %></span></div>',\r\n            selectable : true,\r\n            classes : {\r\n              base : \"thumbnail\"\r\n            }\r\n        },\r\n        renderItem : null\r\n    },\r\n\r\n    _construct: function (elm, options) {\r\n      this.overrided(elm, options);\r\n    }\r\n\r\n  });\r\n\r\n\r\n  plugins.register(Tiler);\r\n\r\n  return groups.Tiler = Tiler;\t\r\n});\ndefine('skylark-domx-plugins-groups/main',[\r\n    \"./groups\",\r\n    \"./group\",\r\n    \"./linear\",\r\n    \"./sortable\",\r\n    \"./tiler\"\r\n], function(groups) {\r\n    return groups;\r\n});\ndefine('skylark-domx-plugins-groups', ['skylark-domx-plugins-groups/main'], function (main) { return main; });\n\n"]}